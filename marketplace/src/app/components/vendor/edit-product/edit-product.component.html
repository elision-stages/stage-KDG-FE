<ng-container *ngIf="selectedProduct">
  <div class="col-12">
    <div class="card">
      <h4>Edit product </h4>

      <div class="flex flex-row flex-wrap">
        <div class="field col-12">
          <label for="title">Title: </label> <br>
          <input class="w-full" type="text" id="title" pInputText [(ngModel)]="selectedProduct.title">
        </div>
        <div class="field md:col-6 col-12">
          <label for="price">Price: </label> <br>
          <p-inputNumber id="price" class="w-full" styleClass="w-full"
                         [showButtons]="true" [(ngModel)]="selectedProduct.price" [min]="0.01"
                         prefix="â‚¬"
                         inputId="stacked" mode="decimal" [step]="0.01" incrementButtonIcon="pi pi-plus"
                         decrementButtonIcon="pi pi-minus">
          </p-inputNumber>
        </div>
        <div class="field md:col-6 col-12">
          <label for="title">Category:</label> <br>
          <p-dropdown [options]="categories" [(ngModel)]="selectedProduct.category"
                      class="w-full" styleClass="w-full"
                      id="category"
                      optionLabel="name"></p-dropdown>
        </div>
        <div class="field col-12">
          <label for="description">Description:</label> <br>
          <p-editor id="description" [(ngModel)]="selectedProduct.description"></p-editor>
        </div>
      </div>

      <p-divider></p-divider>

      <h5>Product Attributes</h5>
      <div *ngFor="let characteristic of selectedProduct.category.characteristics"
           class="mt-1 card ">
        <h5>{{characteristic.name}}</h5>

        <p-knob *ngIf="characteristic.type === 'INTEGER'" [ngModel]="getCharacteristicValue(characteristic.name)"
                [min]="0" [max]="10" (onChange)="attributeChanged(characteristic,$event)"></p-knob>

        <p-dropdown *ngIf="characteristic.type === 'ENUMERATION'" [options]="characteristic.enumValues"
                    [ngModel]="getCharacteristicValue(characteristic.name)"
                    (onChange)="attributeChanged(characteristic,$event)" placeholder="Select a value"></p-dropdown>

        <p-selectButton *ngIf="characteristic.type === 'BOOL'"
                        [options]="[{label: 'Yes', value: 'true'}, {label: 'No', value: 'false'}]"
                        [ngModel]="getCharacteristicValue(characteristic.name)"
                        (onChange)="attributeChanged(characteristic,$event.value)"></p-selectButton>

        <p-inputNumber *ngIf="characteristic.type === 'DECIMAL'" [ngModel]="getCharacteristicValue(characteristic.name)"
                       [showButtons]="true"
                       (onInput)="attributeChanged(characteristic, $event.value)"
                       inputId="stacked" mode="decimal" [step]="0.1" incrementButtonIcon="pi pi-plus"
                       decrementButtonIcon="pi pi-minus">
        </p-inputNumber>

      </div>
      <button
        class="w-full p-3 text-xl mt-1"
        pButton
        pRipple
        label="Save product"
        (click)="editProduct()"
      ></button>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="selectedProduct == undefined">
  <div class="col-12">
    <div class="card">
      <h5 class="center" *ngIf="!isBusy">Something went wrong, please try again</h5>
      <h5 class="center" *ngIf="isBusy">Product loading</h5>
      <p-progressSpinner></p-progressSpinner>
    </div>
  </div>
</ng-container>

